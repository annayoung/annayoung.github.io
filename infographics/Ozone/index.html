<!DOCTYPE HTML>
<html>
<head>
<meta charset="UTF-8">
<title>Ozone Infographic</title>
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
</head>

<body style="display: none; background-color: #47BCB6;">

<object id="svg-object" width="100%" height="100%" style="position: absolute; left: 0; right: 0;" type="image/svg+xml" data="./Ozone1.svg">Your browser does not support SVG</object>
</body>

<script type="text/javascript">

/*var password = prompt("Enter password: ");
while (password != "infographics" && password != null && password != '')
{
	password = prompt("Wrong password. Please try again.");
}
if (password == "infographics")*/
	$('body').show();

var obj = document.getElementById("svg-object");
obj.addEventListener("load", function() {
	var object = obj.contentDocument;

	var balloon = object.getElementById("balloon");
	var buildings = object.getElementById("buildings");
	var front = object.getElementById("front-buildings");
	var factory = object.getElementById("factory");
	var stacks = object.getElementsByClassName("smoke-stack");
	var trees = object.getElementById("trees");
	var trees_hidden = object.getElementById("trees_person");
	var person = object.getElementById("person");
	var beach = object.getElementById("person+beach");
	var sand = object.getElementById("beach");
	var smog = object.getElementById("smog");
	var button1 = object.getElementById("home_button1");
	var button2 = object.getElementById("home_button2");
	var button3 = object.getElementById("home_button3");
	var button4 = object.getElementById("home_button4");

// hover over elements
	$([balloon, button4]).hover(function() {
		$(balloon).attr("fill", "#D1DE58");
		$(object.getElementById("button4_title")).attr("fill", "rgb(58, 158, 153)");
		$(object.getElementById("button4_triangle")).attr("fill", "#D1DE58");
		$(object.getElementById("button4_triangle")).attr("opacity", "1");
	}, function() {
		$(balloon).attr("fill", "#FFFFFF");
		$(object.getElementById("button4_title")).attr("fill", "#D1DE58");
		$(object.getElementById("button4_triangle")).attr("fill", "#FFFFFF");
		$(object.getElementById("button4_triangle")).attr("opacity", "0");
	});
	$([buildings, button1]).hover(function() {
		$(object.getElementById("button1_expand")).attr("opacity", "1");

		$(front).attr("fill", "#D1DE58");
		$(factory).attr("fill", "#D1DE58");
		$(object.getElementById("factory-line")).attr("fill", "#D1DE58");
		$(stacks).each(function() {
			$(this).attr("fill", "#D1DE58");
		});
		$(object.getElementById("button1_title")).attr("fill", "rgb(58, 158, 153)");
		$(object.getElementById("button1_triangle")).attr("fill", "#D1DE58");
		$(object.getElementById("button1_triangle")).attr("opacity", "1");
	}, function() {
		$(object.getElementById("button1_expand")).attr("opacity", "0");

		$(front).attr("fill", "#FFFFFF");
		$(factory).attr("fill", "#FFFFFF");
		$(object.getElementById("factory-line")).attr("fill", "#FFFFFF");
		$(stacks).each(function() {
			$(this).attr("fill", "#FFFFFF");
		});
		$(object.getElementById("button1_title")).attr("fill", "#D1DE58");
		$(object.getElementById("button1_triangle")).attr("fill", "#FFFFFF");
		$(object.getElementById("button1_triangle")).attr("opacity", "0");
	});	

	$([object.getElementById("sources_button"), object.getElementById("land_use_button")]).hover(function() {
		$(this).find('text').attr("fill", "#3A9E99");
		$(this).find('path').attr("fill", "#FFFFFF");
	}, function() {
		$(this).find('text').attr("fill", "#FFFFFF");
		$(this).find('path').attr("fill", "#3A9E99");
	});

	$([trees, trees_hidden, button3]).hover(function() {
		$(object.getElementsByClassName("tree")).each(function() {
			$(this).attr("fill", "#D1DE58");
		});
		$(object.getElementsByClassName("tree-gray")).each(function() {
			$(this).attr("fill", "#99a541");
		});
		$(object.getElementById("button3_title")).attr("fill", "rgb(58, 158, 153)");
		$(object.getElementById("button3_triangle")).attr("fill", "#D1DE58");
		$(object.getElementById("button3_triangle")).attr("opacity", "1");
	}, function() {
		$(object.getElementsByClassName("tree")).each(function() {
			$(this).attr("fill", "#FFFFFF");
		});
		$(object.getElementsByClassName("tree-gray")).each(function() {
			$(this).attr("fill", "#D1D3D4");
		});
		$(object.getElementById("button3_title")).attr("fill", "#D1DE58");
		$(object.getElementById("button3_triangle")).attr("fill", "#FFFFFF");
		$(object.getElementById("button3_triangle")).attr("opacity", "0");
	});

	$([person, button2]).hover(function() {
		$(person).attr("fill", "#D1DE58");
		$(object.getElementById("button2_title")).attr("fill", "rgb(58, 158, 153)");
		$(object.getElementById("button2_triangle")).attr("fill", "#D1DE58");
		$(object.getElementById("button2_triangle")).attr("opacity", "1");
	}, function() {
		$(person).attr("fill", "rgb(58, 158, 153)");
		$(object.getElementById("button2_title")).attr("fill", "#D1DE58");
		$(object.getElementById("button2_triangle")).attr("fill", "#FFFFFF");
		$(object.getElementById("button2_triangle")).attr("opacity", "0");
	});

	$(object.getElementById("page5")).hover(function() {
		$(object.getElementById("title")).attr("fill", "#3A9E99");
		$(object.getElementById("triangle")).attr("fill", "#D1DE58");
		$(object.getElementById("triangle")).attr("opacity", "1");
	}, function() {
		$(object.getElementById("title")).attr("fill", "#D1DE58");
		$(object.getElementById("triangle")).attr("fill", "#FFFFFF");
		$(object.getElementById("triangle")).attr("opacity", "0.3");
	});

	var color, elt;
	$(object.getElementsByClassName("buttons")).hover(function() {
		color = $(this).attr("fill");
		$(this).attr("fill", "rgb(50, 143, 139)");
	}, function() {
		$(this).attr("fill", color);
	});
	$(object.getElementsByClassName("buttons-green")).hover(function() {
		color = $(this).attr("fill");
		$(this).attr("fill", "#D1DE58");
	}, function() {
		$(this).attr("fill", color);
	});

	$(object.getElementsByClassName("buttons2")).hover(function() {
		elt = $(this).find('polygon');
		color = elt.attr("fill");
		elt.attr("fill", "rgb(50, 143, 139)");
	}, function() {
		elt.attr("fill", color);
	});
	$(object.getElementsByClassName("buttons3")).hover(function() {
		elt = $(this).find('polygon');
		color = elt.attr("fill");
		elt.attr("fill", "rgb(50, 143, 139)");
		$(this).find('path').attr("stroke", "rgb(50, 143, 139)");
	}, function() {
		elt.attr("fill", color);
		$(this).find('path').attr("stroke", color);
	});
	$(object.getElementsByClassName("buttons4")).hover(function() {
		elt = $(this).find('polygon');
		color = elt.attr("fill");
		elt.attr("fill", "rgb(50, 143, 139)");
		$(this).find('line').attr("stroke", "rgb(50, 143, 139)");
	}, function() {
		elt.attr("fill", color);
		$(this).find('line').attr("stroke", color);
	});


	var seconds = 1; // animation time

// GO BACK BUTTON
	// from person
	$(object.getElementById("go_back")).click(function() {
		$(person).attr("cursor", "pointer").attr("pointer-events", "auto");
		$(trees_hidden).attr("cursor", "pointer").attr("pointer-events", "auto");

		//$(object.getElementById("page1-references")).attr("visibility", "visible");
		//$(object.getElementById("health-references")).attr("visibility", "hidden");
		//$(object.getElementById("respiratory2")).fadeOut(200);
		$(object.getElementsByClassName("trees-hide")).show();
		$(object.getElementById("tree-ground")).delay(seconds*1000).show(0);
		$(object.getElementById("go_back")).delay(100).fadeOut(200);

		$(object.getElementById("respiratory2")).fadeIn(200);
		//$(object.getElementById("respiratory2-health")).fadeIn(200);
		$(object.getElementById("respiratory_close")).fadeOut(200);
		$(object.getElementById("respiratory-info")).fadeOut(200);
	});
	// from cities
	$(object.getElementById("go_back_cities")).click(function() {
		$(buildings).attr("cursor", "pointer").attr("pointer-events", "auto");
		$([trees, trees_hidden]).attr("cursor", "pointer").attr("pointer-events", "auto");
		//$(object.getElementById("page1-ref2")).attr("visibility", "hidden");
		//$(object.getElementById("page1-references")).attr("visibility", "visible");
		$(smog).delay(1000*seconds).fadeIn(seconds*1000);
		$(object.getElementById("group1")).fadeOut(500);
		$(object.getElementById("molecules")).fadeOut(500);
		$(object.getElementById("go_back_cities")).delay(100).fadeOut(200);
		$(object.getElementById("green-molecules")).delay(seconds*1000).fadeOut(0);
		$(object.getElementById("molecules-lines")).fadeIn(seconds*1000);
	});
	// from balloon
	$(object.getElementById("go_back_balloon")).click(function() {
		$([balloon, buildings, trees, trees_hidden]).attr("cursor", "pointer").attr("pointer-events", "auto");
		$(smog).delay(1000*seconds).fadeIn(seconds*1000);

		$([object.getElementById("cityscape"), object.getElementById("mountains")]).fadeIn(700);
		$(object.getElementById("cityscape2")).fadeOut(700);
		$(object.getElementById("go_back_balloon")).fadeOut(200);

		//$(object.getElementById("page1-references")).attr("visibility", "visible");
		//$(object.getElementById("balloon-ref")).attr("visibility", "hidden");
	});
	// from trees
	$(object.getElementById("go_back_trees")).click(function() {
		$([balloon, buildings, trees, trees_hidden]).attr("cursor", "pointer").attr("pointer-events", "auto");
		$(object.getElementById("smog2")).fadeOut(seconds * 1000);
		$(object.getElementById("go_back_trees")).fadeOut(400);

		$(object.getElementById("layer1")).delay(.75*seconds*1000).fadeOut(seconds/4.0*1000);
		$(object.getElementById("layer2")).delay(seconds/2.0*1000).fadeOut(seconds/4.0*1000);
		$(object.getElementById("layer3")).delay(seconds/4.0*1000).fadeOut(seconds/4.0*1000);
		$(object.getElementById("layer4-sun")).fadeOut(seconds/4.0*1000);

		//$(object.getElementById("page1-references")).attr("visibility", "visible");
		//$(object.getElementById("eco-ref")).attr("visibility", "hidden");

		$(object.getElementById("layer5-lines")).find("polyline").each(function() {$(this).delay(seconds*1000).fadeOut(0);});
		//$(object.getElementById("layer5-lines")).find("polygon").each(function() {$(this).fadeOut(0);});
		$(object.getElementById("rays-label")).fadeOut(0);
		$([object.getElementById("ecosystem-buttons-open"), object.getElementById("ecosystem-buttons-close")]).fadeOut(seconds*1000);
	});
	// from recommendations page
	$(object.getElementById("go_back_page5")).click(function() {
		$(smog).delay(1000*seconds).fadeIn(2*seconds*1000);
		$([buildings, trees, balloon]).attr("cursor", "pointer").attr("pointer-events", "auto");
		$(object.getElementById("go_back_page5")).fadeOut(400);
		$([object.getElementById("page5-trees1"), object.getElementById("page5-trees2")]).delay(3*seconds*1000).fadeIn(500);
		//$(object.getElementById("bowman")).attr("visibility", "hidden");
		//$(object.getElementById("page1-references")).attr("visibility", "visible");
	});

// HIDE ELEMENTS OF FIRST PAGE	
	// balloon floats up
	$(balloon).append(createMotion(2*seconds, "person.click; home_button2.click; buildings.click; land_use_button.click; sources_button.click; trees.click; trees_person.click; home_button3.click", 
		"0,0", "0,-1600", "go_back.click; go_back_cities.click; go_back_trees.click; go_back_land_use.click"));
	$(balloon).append(createMotion(2*seconds, "go_back.click; go_back_cities.click; go_back_land_use.click; go_back_trees.click", "0,-1600", "0,0", "person.click; home_button2.click; buildings.click; land_use_button.click; sources_button.click; trees.click; trees_person.click; home_button3.click"));	
	// text moves out
	$(object.getElementById("page1-text")).append(createMotion(seconds, "buildings.click; sources_button.click; land_use_button.click; balloon.click; home_button4.click; trees.click; trees_person.click; home_button3.click; page5.click", "0,0", "2000,0", "go_back_cities.click + " + seconds + "s; go_back_land_use.click + " + seconds + "s; go_back_balloon.click + " + seconds + "s; go_back_trees.click + " + seconds + "s; go_back_page5.click + " + seconds + "s"))
		.append(createMotion(seconds, "go_back_cities.click + " + seconds + "s; go_back_land_use.click + " + seconds + "s; go_back_balloon.click + " + seconds + "s; go_back_trees.click + " + (seconds) + "s; go_back_page5.click + " + (3*seconds) + "s", "2000,0", "0,0", "buildings.click; sources_button.click; land_use_button.click; balloon.click; home_button4.click; trees.click; trees_person.click; home_button3.click; page5.click"));
	// beach moves out
	$([person, sand]).append(createMotion(seconds, "buildings.click; sources_button.click; land_use_button.click; balloon.click; home_button4.click; trees.click; trees_person.click; home_button3.click; page5.click", "0,0", "2000,0", "go_back_cities.click; go_back_land_use.click; go_back_balloon.click; go_back_trees.click; go_back_page5.click"))
		.append(createMotion(seconds, "go_back_cities.click + " + seconds + "s; go_back_land_use.click + " + seconds + "s; go_back_balloon.click + " + seconds + "s; go_back_trees.click + " + (seconds) + "s; go_back_page5.click + " + (3*seconds) + "s", "2000,0", "0,0", "buildings.click + " + seconds + "s; sources_button.click + " + seconds + "s; land_use_button.click + " + seconds + "s; balloon.click + " + seconds + "s; home_button4.click + " + seconds + "s; trees.click + " + seconds + "s; trees_person.click + " + seconds + "s; home_button3.click + " + seconds + "s; page5.click + " + seconds + "s"));
	// side trees move out
	$([trees_hidden, object.getElementById("trees-to-hide")]).append(createMotion(seconds, "balloon.click; home_button4.click; trees.click; trees_person.click; home_button3.click; land_use_button.click; page5.click", "0,0", "2000,0", "go_back_balloon.click; go_back_trees.click; go_back_page5.click"))
		.append(createMotion(seconds, "go_back_balloon.click + " + seconds + "s; go_back_trees.click + " + (seconds) + "s; go_back_land_use.click + " + seconds + "s; go_back_page5.click + " + (3*seconds) + "s", "2000,0", "0,0", "balloon.click + " + seconds + "s; home_button4.click + " + seconds + "s; trees.click + " + seconds + "s; trees_person.click + " + seconds + "s; home_button3.click + " + seconds + "s; page5.click + " + seconds + "s"));	

// WHEN PERSON CLICKED
	personClicked(object, person, trees_hidden, balloon, beach, seconds, button2);

// WHEN CITIES/FACTORY CLICKED
	citiesClicked(object, buildings, seconds, trees, person, trees_hidden, smog, sand, object.getElementById("sources_button"));

// WHEN BALLOON CLICKED
	balloonClicked(object, seconds, balloon, beach, buildings, trees, trees_hidden, smog, button4);

// WHEN TREES CLICKED
	treesClicked(object, seconds, trees, trees_hidden, smog, balloon, buildings, button3);

// WHEN RECOMMENDATIONS CLICKED
	recsClicked(object, seconds, smog, buildings, trees, balloon);

// WHEN LAND USE CLICKED
	landUseClicked(object, seconds, smog, trees_hidden);
});

	function landUseClicked(object, seconds, smog, trees_hidden)
	{
		// land_use_button
		$(object.getElementById("land_use_button")).click(function() {
			$(smog).fadeOut(1000);
			$([object.getElementById("buildings"), object.getElementById("trees")]).attr("cursor", "auto").attr("pointer-events", "none");
			$(object.getElementById("land-sun")).delay(1000).fadeIn(1000);

			$([object.getElementById("factory-container"), object.getElementById("tree_hide_land_use")]).fadeOut(250);

			$(object.getElementById("go_back_land_use")).delay(4500).fadeIn(500);

			//$(object.getElementById("land-ref")).attr("visibility", "visible");
			//$(object.getElementById("page1-references")).attr("visibility", "hidden");
		});
		
		$(object.getElementById("go_back_land_use")).click(function() {
			$(smog).delay(1000).fadeIn(seconds*1000);
			$(object.getElementById("land-sun")).fadeOut(1000);
			$([object.getElementById("buildings"), object.getElementById("trees")]).attr("cursor", "pointer").attr("pointer-events", "auto");

			//$(object.getElementById("land-ref")).attr("visibility", "hidden");
			//$(object.getElementById("page1-references")).attr("visibility", "visible");

			$([object.getElementById("factory-container"), object.getElementById("tree_hide_land_use")]).delay(1900).fadeIn(100);

			$(object.getElementById("go_back_land_use")).hide();
		});

		// car move in is in citiesClicked()

		// text comes in
		$(object.getElementById("land_use_text")).append(createMotion(seconds, "land_use_button.click", "-1600,0", "0,0", "go_back_land_use.click + " + seconds + "s"))
			.append(createSet("visibility", "visible", "land_use_button.click;", "go_back_land_use.click + " + (2*seconds) + "s", false))
			.append(createMotion(seconds, "go_back_land_use.click + " + (seconds) + "s", "0,0", "-1600,0", "land_use_button.click; "));

		// scale city

		$([object.getElementById("trees_behind"), object.getElementById("just-buildings"), trees_hidden, object.getElementById("mountains")])
			.append(createTransform("scale", seconds, "land_use_button.click", "1", "1.23"))
			//.append(createSet("transform", "scale(1)", "go_back_land_use.click", false, false))
			.append(createMotion(seconds, "land_use_button.click", "0,0", "-50,-86", "go_back_land_use.click + " + seconds + "s"))
			.append(createTransform("scale", seconds, "go_back_land_use.click + " + seconds + "s", "1.23", "1"))
			.append(createMotion(seconds, "go_back_land_use.click + " + seconds + "s", "-50,-86", "0,0", "land_use_button.click"));
		$(object.getElementById("trees_right"))
			.append(createMotion(seconds, "land_use_button.click", "0,0", "120,114", "go_back_land_use.click + " + seconds + "s"))
			.append(createMotion(seconds, "go_back_land_use.click + " + seconds + "s", "120,114", "0,0", "land_use_button.click"));
		$(object.getElementById("trees_left"))
			.append(createMotion(seconds, "land_use_button.click", "0,0", "-40,114", "go_back_land_use.click + " + seconds + "s"))
			.append(createMotion(seconds, "go_back_land_use.click + " + seconds + "s", "-40,114", "0,0", "land_use_button.click"));


		//$(object.getElementsByClassName("transform_city"))
			//.append(createTransform("scale", seconds, "go_back_land_use.click + " + seconds + "s", "1", "0.813"));
			//.append(createSet("transform", "scale(1)", "land_use_button.click", false, false));


		// crops move in
		$(object.getElementById("land_use_crops"))
			.append(createMotion(seconds, "land_use_button.click", "0,300", "0,10", "go_back_land_use.click + " + seconds + "s"))
			.append(createSet("visibility", "visible", "land_use_button.click;", "go_back_land_use.click + " + (2*seconds) + "s", false))
			.append(createMotion(seconds, "go_back_land_use.click + " + (seconds) + "s", "0,10", "0,300", "land_use_button.click; "));

		//clouds move in
		$(object.getElementById("clouds"))
			.append(createMotion(seconds, "land_use_button.click + 1s", "-900,0", "0,0", "go_back_land_use.click + " + seconds + "s"))
			.append(createSet("visibility", "visible", "land_use_button.click + 1s", "go_back_land_use.click + " + (seconds/2.0) + "s", false))
			.append(createMotion(seconds, "go_back_land_use.click", "0,0", "-900,0", "land_use_button.click; "));

		// sun rays draw
		$(object.getElementById("sun-rays"))
			.append(createSet("visibility", "visible", "land_use_button.click + 2s", "go_back_land_use.click", false))
			.append(createAnimate("opacity", seconds, "land_use_button.click + 3s", "0.3", "0", "go_back_land_use.click", false))
			.append(createSet("opacity", "0.3", "go_back_land_use.click", "land_use_button.click + 3s", false));
		$(object.getElementById("sun-clip")).find("rect")
			.append(createAnimate("height", seconds, "land_use_button.click + 2s", "0", "1161.907", "go_back_land_use.click", false));

		// smaller sun rays
		$(object.getElementById("sun-rays2"))
			.append(createSet("visibility", "visible", "land_use_button.click + 3s", "go_back_land_use.click + 1s", false))
			.append(createAnimate("opacity", seconds, "land_use_button.click + 3s", "0", "0.3", "go_back_land_use.click", false))
			.append(createAnimate("opacity", seconds, "go_back_land_use.click", "0.3", "0", "land_use_button.click", false));
		// ozone smog
		$(object.getElementById("ozone-rect"))
			.append(createSet("visibility", "visible", "land_use_button.click + 3s", "go_back_land_use.click + 1s", false))
			.append(createAnimate("opacity", seconds, "land_use_button.click + 3s", "0", "1", "go_back_land_use.click", false))
			.append(createAnimate("opacity", seconds, "go_back_land_use.click", "1", "0", "land_use_button.click", false));
		$(object.getElementById("ozone-clip")).find("rect")
			.append(createAnimate("y", seconds, "land_use_button.click + 3s", "971.002", "420.002", "go_back_land_use.click", false));


		// text boxes draw in
		$(object.getElementById("land_use_text_container"))
			.append(createSet("visibility", "visible", "land_use_button.click + 4.5s", "go_back_land_use.click + 0.5s", false));
		$(object.getElementById("land_use_text_container")).find('line').each(function() {
			$(this)
				.append(createAnimate("stroke-dashoffset", seconds, "land_use_button.click + 4.5s", "645", "0", "go_back_land_use.click", false))
				.append(createAnimate("stroke-dashoffset", seconds/2.0, "go_back_land_use.click", "0", "645", "land_use_button.click", false));
		});
		$(object.getElementById("low_pop_open"))
			.append(createSet("visibility", "visible", "land_use_button.click + 4.5s; low_pop_close.click", "low_pop_open.click; go_back_land_use.click", false));
		$(object.getElementById("dense_pop_open"))
			.append(createSet("visibility", "visible", "land_use_button.click + 4.5s; dense_pop_close.click", "dense_pop_open.click; go_back_land_use.click", false));
		$(object.getElementById("ozone_chemicals_open"))
			.append(createSet("visibility", "visible", "land_use_button.click + 4s; ozone_chemicals_close.click", "ozone_chemicals_open.click; go_back_land_use.click", false));
		
		$(object.getElementById("low_pop_close"))
			.append(createSet("visibility", "visible", "low_pop_open.click", "low_pop_close.click; go_back_land_use.click", false));
		$(object.getElementById("dense_pop_close"))
			.append(createSet("visibility", "visible", "dense_pop_open.click", "dense_pop_close.click; go_back_land_use.click", false));
		$(object.getElementById("ozone_chemicals_close"))
			.append(createSet("visibility", "visible", "ozone_chemicals_open.click", "ozone_chemicals_close.click; go_back_land_use.click", false));

		$(object.getElementById("low_pop_text"))
			.append(createSet("visibility", "visible", "low_pop_open.click", "low_pop_close.click + 0.5s; go_back_land_use.click + 0.5s", false));
		$(object.getElementById("dense_pop_text"))
			.append(createSet("visibility", "visible", "dense_pop_open.click", "dense_pop_close.click + 0.5s; go_back_land_use.click + 0.5s", false));
		$(object.getElementById("ozone_chemicals_text"))
			.append(createSet("visibility", "visible", "ozone_chemicals_open.click", "ozone_chemicals_close.click + 0.5s; go_back_land_use.click + 0.5s", false));

		$(object.getElementById("low-pop-clip")).find("rect")
			.append(createAnimate("y", seconds/2.0, "low_pop_open.click", "792.116", "615.116", "low_pop_close.click; go_back_land_use.click", false))
			.append(createAnimate("y", seconds/2.0, "low_pop_close.click; go_back_land_use.click", "615.116", "792.116", "low_pop_open.click; land_use_button.click", false));
		$(object.getElementById("dense-pop-clip")).find("rect")
			.append(createAnimate("y", seconds/2.0, "dense_pop_open.click", "547.001", "420.001", "dense_pop_close.click; go_back_land_use.click", false))
			.append(createAnimate("y", seconds/2.0, "dense_pop_close.click; go_back_land_use.click", "420.001", "547.001", "dense_pop_open.click; land_use_button.click", false));
		$(object.getElementById("chemicals-clip")).find("rect")
			.append(createAnimate("width", seconds/2.0, "ozone_chemicals_open.click", "0", "382", "ozone_chemicals_close.click; go_back_land_use.click", false))
			.append(createAnimate("width", seconds/2.0, "ozone_chemicals_close.click; go_back_land_use.click", "382", "0", "ozone_chemicals_open.click; land_use_button.click", false));


		// ozone chemicals
		$(object.getElementById("ozone_chemicals"))
			.append(createSet("visibility", "visible", "land_use_button.click + 4s", "go_back_land_use.click + 1s", false))
			.append(createAnimate("opacity", seconds, "land_use_button.click + 4s", "0", "1", "go_back_land_use.click", false))
			.append(createAnimate("opacity", seconds, "go_back_land_use.click", "1", "0", "land_use_button.click", false));

		ozoneSlider(object);

	}

	function ozoneSlider(object)
	{
		var current = 0; // can be 0-4 inclusive
		$([object.getElementById("land_use_button"), 
			object.getElementById("ozone_chemicals_close")]).click(function() {
			if (current != 0)
			{
				$(object.getElementById("chemicals" + current)).fadeOut(500);
				$(object.getElementById("chemicals0")).fadeIn(500);
				$(object.getElementById("ozone_left")).attr("opacity", "0.5").attr("pointer-events", "none");
				$(object.getElementById("ozone_right")).attr("opacity", "1").attr("pointer-events", "auto");

			}
			current = 0;
		});

		$(object.getElementById("ozone_chemicals_open")).click(function() {
			if (current != 4)
			{
				$(object.getElementById("chemicals4")).fadeIn(500);
				$(object.getElementById("chemicals" + current)).fadeOut(500);
				$(object.getElementById("ozone_left")).attr("opacity", "1").attr("pointer-events", "auto");
				$(object.getElementById("ozone_right")).attr("opacity", "0.5").attr("pointer-events", "none");

			}
			current = 4;
		});

		$(object.getElementById("ozone_right")).click(function() {
			if (current < 4)
			{
				if (current == 0)
					$(object.getElementById("ozone_left")).attr("opacity", "1").attr("pointer-events", "auto");

				$(object.getElementById("chemicals" + current)).fadeOut(500);	// hide previous
				current++;
				$(object.getElementById("chemicals" + current)).fadeIn(500); // show next
				if (current == 4)
				{
					$(this).attr("opacity", "0.5").attr("pointer-events", "none");
				}
				
			}
			// else can't move right any more
		});

		$(object.getElementById("ozone_left")).click(function() {
			if (current > 0)
			{
				if (current == 4)
				{
					$(object.getElementById("ozone_right")).attr("opacity", "1").attr("pointer-events", "auto");
				}

				$(object.getElementById("chemicals" + current)).fadeOut(500);	// hide previous
				current--;
				$(object.getElementById("chemicals" + current)).fadeIn(500); // show next
				if (current == 0)
				{
					$(this).attr("opacity", "0.5").attr("pointer-events", "none");
				}
				
			}
			// else can't move left any more
		});
	}



	function recsClicked(object, seconds, smog, buildings, trees, balloon) {
		$(object.getElementById("page5")).click(function() {
			$(smog).fadeOut(seconds*1000);
			$([buildings, trees, balloon]).attr("cursor", "auto").attr("pointer-events", "none");
			$(object.getElementById("go_back_page5")).delay(5*seconds*1000).fadeIn(400);
			$([object.getElementById("page5-trees1"), object.getElementById("page5-trees2")]).fadeOut(500);

			//$(object.getElementById("bowman")).attr("visibility", "visible");
			//$(object.getElementById("page1-references")).attr("visibility", "hidden");
		});

		// text comes in
		$(object.getElementById("page5-text")).append(createMotion(seconds, "page5.click", "-1600,0", "0,0", "go_back_page5.click + " + seconds + "s"))
			.append(createSet("visibility", "visible", "page5.click;", "go_back_page5.click + " + (3*seconds) + "s", false))
			.append(createMotion(seconds, "go_back_page5.click + " + (2*seconds) + "s", "0,0", "-1600,0", "page5.click; "));


		// landscape moves left
		$([buildings, trees, object.getElementById("trees_behind")])
			.append(createMotion(seconds, "page5.click", "0,0", "-1005,103", "go_back_page5.click"))
			.append(createMotion(seconds, "go_back_page5.click + " + (2*seconds) + "s", "-1005,103", "0,0", "page5.click"));
		$(object.getElementById("mountains"))
			.append(createMotion(seconds, "page5.click", "0,0", "0,103", "go_back_page5.click"))
			.append(createMotion(seconds, "go_back_page5.click + " + (2*seconds) + "s", "0,103", "0,0", "page5.click"));

		// second landscape moves in from right
		$(object.getElementById("buildings2"))
			.append(createMotion(seconds, "page5.click;", "1600,-103", "0,0", "go_back_page5.click + " + seconds + "s"))
			.append(createSet("visibility", "visible", "page5.click", "go_back_page5.click + " + (2*seconds) + "s", false))
			.append(createMotion(seconds, "go_back_page5.click + " + (2*seconds) + "s", "0,0", "1600,-103", "page5.click"));
	
		// balloon moves
		$(balloon)
			.append(createMotion(seconds, "page5.click", "0,0", "855,-70", "go_back_page5.click"))
			.append(createMotion(seconds, "go_back_page5.click + " + (3*seconds) + "s", "855,-70", "0,0", "page5.click"));

		// satellite moves in
		$(object.getElementById("page5-satellite"))
			.append(createSet("visibility", "visible", "page5.click + " + (1.5*seconds) + "s", "go_back_page5.click + " + (2*seconds) + "s", false))
			.append(createMotion(2*seconds, "page5.click + " + (1.5*seconds) + "s", "-800,0", "0,0", "go_back_page5.click"))
			.append(createMotion(seconds, "go_back_page5.click + " + seconds + "s", "0,0", "-800,0", "page5.click"));
	
		// plane moves in
		$(object.getElementById("page5-plane"))
			.append(createSet("visibility", "visible", "page5.click + " + seconds + "s", "go_back_page5.click + " + (2*seconds) + "s", false))
			.append(createMotion(2*seconds, "page5.click + " + seconds + "s", "-800,0", "0,0", "go_back_page5.click"))
			.append(createMotion(seconds, "go_back_page5.click + " + seconds + "s", "0,0", "1600,0", "page5.click"));

		// numbers for text boxes draw
		$(object.getElementsByClassName("numbers")).find("path").each(function(){
			var stroke = $(this).attr("stroke-dashoffset") + "";
			$(this).append(createSet("visibility", "visible", "page5.click + " + (3.5*seconds) + "s", "go_back_page5.click + " + seconds + "s", false))
			.append(createAnimate("stroke-dashoffset", seconds, "page5.click + " + (3.5*seconds) + "s", stroke, "0", "go_back_page5.click", false))
			.append(createAnimate("stroke-dashoffset", seconds, "go_back_page5.click", "0", stroke, "page5.click", false));
		});
		// lines to sources draw
		$(object.getElementById("sources-lines")).find("polyline").each(function() {
			var stroke_offset = $(this).attr("stroke-dashoffset");
			var open_button = $(this).attr("class");
			var close = open_button + "close"; 
			$(this).append(createSet("visibility", "visible", open_button + ".click", "go_back_page5.click + " + (seconds/2.0) + "s; " + close + ".click + " + (seconds/2.0) + "s", false))
			.append(createAnimate("stroke-dashoffset", seconds/2.0, open_button + ".click", stroke_offset, "0", "go_back_page5.click; " + close + ".click", false))
			.append(createAnimate("stroke-dashoffset", seconds/2.0, close + ".click; go_back_page5.click", "0", stroke_offset, "page5.click; " + open_button + ".click", false));
		});

		// text box buttons draw
		$(object.getElementById("page5-buttons-open")).children().each(function() {
			var id = $(this).attr("id");
			var close_button = id + "close";
			$(this).append(createSet("visibility", "visible", "page5.click + " + (4.5*seconds) + "s; " + close_button + ".click", "go_back_page5.click; " + id + ".click", false));
			$(object.getElementById(close_button)).append(createSet("visibility", "visible", id + ".click", "go_back_page5.click; " + close_button + ".click", false));
		});

		// text boxes & rects open up
		$(object.getElementById("page5-text-boxes")).children().each(function() {
			var open = $(this).attr("id") + "_open";
			var close = $(this).attr("id") + "_openclose";
			$(this).append(createSet("visibility", "visible", open + ".click", close + ".click + " + (seconds/2.0) + "s; go_back_page5.click + " + (seconds/2.0) + "s", false));
		});
		$(object.getElementById("page5-clip1")).find("rect")
			.append(createAnimate("width", seconds/2.0, "page51_open.click", "0", "520", "page51_openclose.click; go_back_page5.click", false))
			.append(createAnimate("width", seconds/2.0, "page51_openclose.click; go_back_page5.click", "520", "0", "page51_open.click; page5.click", false));
		$(object.getElementById("page5-clip2")).find("rect")
			.append(createAnimate("width", seconds/2.0, "page52_open.click", "0", "520", "page52_openclose.click; go_back_page5.click", false))
			.append(createAnimate("width", seconds/2.0, "page52_openclose.click; go_back_page5.click", "520", "0", "page52_open.click; page5.click", false));
		$(object.getElementById("page5-clip3")).find("rect")
			.append(createAnimate("width", seconds/2.0, "page53_open.click", "0", "520", "page53_openclose.click; go_back_page5.click", false))
			.append(createAnimate("width", seconds/2.0, "page53_openclose.click; go_back_page5.click", "520", "0", "page53_open.click; page5.click", false));
		$(object.getElementById("page5-clip4")).find("rect")
			.append(createAnimate("width", seconds/2.0, "page54_open.click", "0", "520", "page54_openclose.click; go_back_page5.click", false))
			.append(createAnimate("width", seconds/2.0, "page54_openclose.click; go_back_page5.click", "520", "0", "page54_open.click; page5.click", false));


	}

	function treesClicked(object, seconds, trees, trees_hidden, smog, balloon, buildings, button) {
		$([trees, trees_hidden, button]).click(function() {
			$([balloon, buildings, trees, trees_hidden]).attr("cursor", "auto").attr("pointer-events", "none");
			$(object.getElementById("smog2")).delay(seconds*1000).fadeIn(seconds*1000);
			$(object.getElementById("go_back_trees")).delay(5.5*seconds*1000).fadeIn(400);

			//$(object.getElementById("page1-references")).attr("visibility", "hidden");
			//$(object.getElementById("eco-ref")).attr("visibility", "visible");
		
			// ozone layers draw
			$(object.getElementById("layer1")).delay(1.5*seconds*1000).fadeIn(seconds*1000);
			$(object.getElementById("layer2")).delay(2.5*seconds*1000).fadeIn(seconds*1000);
			$(object.getElementById("layer3")).delay(3.5*seconds*1000).fadeIn(seconds*1000);
			$(object.getElementById("layer4-sun")).delay(4.5*seconds*1000).fadeIn(seconds*1000);
		
			// sun rays
			$(object.getElementById("layer5-lines")).find("polyline").each(function() {$(this).delay(4.5*seconds*1000).fadeIn(0);});
			//$(object.getElementById("layer5-lines")).find("polygon").each(function() {$(this).delay(6.4*seconds*1000).fadeIn(0);});
			$(object.getElementById("rays-label")).delay(6.4*seconds*1000).fadeIn(0);
		
			// text boxes fade in
			$([object.getElementById("ecosystem-buttons-open"), object.getElementById("ecosystem-buttons-close")]).delay(4.5*seconds*1000).fadeIn(seconds*1000);
		});

		// buildings move out
		$(object.getElementById("just-buildings"))
			.append(createMotion(seconds, "trees.click; trees_person.click; home_button3.click", "0,0", "0,500", "go_back_trees.click + " + seconds + "s"))
			.append(createMotion(seconds, "go_back_trees.click + " + (seconds) + "s", "0,500", "0,0", "trees.click; trees_person.click; home_button3.click"));
		
		// crops move in
		$(object.getElementById("crops"))
			.append(createMotion(seconds, "trees.click; trees_person.click; home_button3.click", "0,400", "0,-19", "go_back_trees.click + " + seconds + "s"))
			.append(createSet("visibility", "visible", "trees.click; trees_person.click; home_button3.click", "go_back_trees.click + " + (2*seconds) + "s", false))
			.append(createMotion(seconds, "go_back_trees.click + " + seconds + "s", "0,-19", "0,400", "trees.click; trees_person.click; home_button3.click"));
		
		// city moves down
		$([trees, object.getElementById("trees_behind"), object.getElementById("factory-container"), object.getElementById("mountains"), object.getElementById("smog")])
			.append(createMotion(seconds, "trees.click; trees_person.click; home_button3.click", "0,0", "0,90", "go_back_trees.click + " + seconds + "s"))
			.append(createMotion(seconds, "go_back_trees.click + " + seconds + "s", "0,90", "0,0", "trees.click; trees_hidden.click; home_button3.click"));
	
		// smog fades in
		$(smog).append(createAnimate("fill-opacity", seconds, "trees.click + " + seconds + "s; trees_person.click + " + seconds + "s; home_button3.click + " + seconds + "s", "0.15", "0.5", "go_back_trees.click", false))
				.append(createAnimate("fill-opacity", seconds, "go_back_trees.click", "0.5", "0.15", "trees.click; trees_person.click; home_button3.click", false));

		// text comes in
		$(object.getElementById("trees-text")).append(createMotion(seconds, "trees.click; trees_person.click; home_button3.click", "-1600,0", "0,0", "go_back_trees.click + " + seconds + "s"))
			.append(createSet("visibility", "visible", "trees.click; trees_person.click; home_button3.click", "go_back_trees.click + " + (2*seconds) + "s", false))
			.append(createMotion(seconds, "go_back_trees.click + " + seconds + "s", "0,0", "-1600,0", "trees.click; trees_person.click; home_button3.click"));
		
		// buttons show
		$(object.getElementById("ecosystem-buttons-open")).children().each(function() {
			var id = $(this).attr("id");
			var close_button = id + "close";
			$(this).append(createSet("visibility", "visible", "trees.click + " + (4.5*seconds) + "s; trees_person.click + " + (4.5*seconds) + "s; " + close_button + ".click; home_button3.click + " + (4.5*seconds) + "s", "go_back_trees.click + 1s; " + id + ".click", false));
			$(object.getElementById(close_button)).append(createSet("visibility", "visible", id + ".click", "go_back_trees.click + 1s; " + close_button + ".click", false));
		});

		// sun rays draw
		$(object.getElementById("layer5-lines")).find("polyline").each(function() {$(this)
			.append(createAnimate("stroke-dashoffset", 2*seconds, "trees.click + " + (4.5*seconds) + "s; trees_person.click + " + (4.5*seconds) + "s; home_button3.click + " + (4.5*seconds) + "s", "300", "0", "go_back_trees.click", true, "rays"))
			.append(createAnimate("stroke-dashoffset", seconds, "go_back_trees.click", "0", "300", "trees.click; trees_person.click; home_button3.click", false));
		});

		// text boxes & rects open up
		$(object.getElementById("ecosystem-text-boxes")).children().each(function() {
			var open = $(this).attr("id") + "_open";
			var close = $(this).attr("id") + "_openclose";
			$(this).append(createSet("visibility", "visible", open + ".click", close + ".click + " + (seconds/2.0) + "s; go_back_trees.click + .5s", false));
		});
		$(object.getElementById("eco-path1")).find("rect")
			.append(createAnimate("width", seconds/4.0, "ecosystem1_open.click", "0", "237", "ecosystem1_openclose.click; go_back_trees.click", false))
			.append(createAnimate("width", seconds/4.0, "ecosystem1_openclose.click; go_back_trees.click", "237", "0", "ecosystem1_open.click; trees.click; trees_person.click; home_button3.click", false));
		$(object.getElementById("eco-path2")).find("rect")
			.append(createAnimate("width", seconds/4.0, "ecosystem2_open.click", "0", "238", "ecosystem2_openclose.click; go_back_trees.click", false))
			.append(createAnimate("width", seconds/4.0, "ecosystem2_openclose.click; go_back_trees.click", "238", "0", "ecosystem2_open.click; trees.click; trees_person.click; home_button3.click", false));
		$(object.getElementById("eco-path3")).find("rect")
			.append(createAnimate("width", seconds/4.0, "ecosystem3_open.click", "0", "355", "ecosystem3_openclose.click; go_back_trees.click", false))
			.append(createAnimate("width", seconds/4.0, "ecosystem3_openclose.click; go_back_trees.click", "355", "0", "ecosystem3_open.click; trees.click; trees_person.click; home_button3.click", false));
		$(object.getElementById("eco-path4")).find("rect")
			.append(createAnimate("width", seconds/4.0, "ecosystem4_open.click", "0", "231", "ecosystem4_openclose.click; go_back_trees.click", false))
			.append(createAnimate("width", seconds/4.0, "ecosystem4_openclose.click; go_back_trees.click", "231", "0", "ecosystem4_open.click; trees.click; trees_person.click; home_button3.click", false));

	}

	function balloonClicked(object, seconds, balloon, beach, buildings, trees, trees_hidden, smog, button) {
		$([balloon, button]).click(function() {
			$([balloon, buildings, trees, trees_hidden]).attr("cursor", "auto").attr("pointer-events", "none");
			$(smog).fadeOut(seconds*1000);

			$([object.getElementById("cityscape"), object.getElementById("mountains")])
				.delay(seconds*800).fadeOut(800);
			$(object.getElementById("cityscape2")).delay(seconds*800).fadeIn(800);
			$(object.getElementById("go_back_balloon")).delay(4*seconds*1000).fadeIn(200);

			//$(object.getElementById("page1-references")).attr("visibility", "hidden");
			//$(object.getElementById("balloon-ref")).attr("visibility", "visible");
		});

		// text come in
		$(object.getElementById("monitoring-text")).append(createMotion(seconds, "balloon.click; home_button4.click", "-1600,0", "0,0", "go_back_balloon.click + " + seconds + "s"))
			.append(createSet("visibility", "visible", "balloon.click; home_button4.click", "go_back_balloon.click + " + (2*seconds) + "s", false))
			.append(createMotion(seconds, "go_back_balloon.click + " + seconds + "s", "0,0", "-1600,0", "balloon.click; home_button4.click"));
		
		// city zooms out
		$([object.getElementById("cityscape"), object.getElementById("mountains")])
			.append(createTransform("scale", seconds, "balloon.click; home_button4.click", "1", "0.5"))
			.append(createMotion(seconds, "balloon.click; home_button4.click", "0,0", "400,530", "go_back_balloon.click + " + seconds + "s"))
			.append(createTransform("scale", seconds, "go_back_balloon.click + " + seconds + "s", "0.5", "1"))
			.append(createMotion(seconds, "go_back_balloon.click + " + seconds + "s", "400,530", "0,0", "balloon.click; home_button4.click"));
		
		// balloon moves left & down
		$(balloon)
			.append(createMotion(seconds, "balloon.click; home_button4.click", "0,0", "-5,145", "go_back_balloon.click"))
			.append(createMotion(seconds, "go_back_balloon.click + " + seconds + "s", "-5,145", "0,0", "balloon.click; home_button4.click"));
	
		// gradient moves up
		$(object.getElementById("gradient"))
			.append(createSet("visibility", "visible", "balloon.click; home_button4.click", "go_back_balloon.click + " + seconds + "s", false))
			.append(createMotion(2*seconds, "balloon.click; home_button4.click", "0,1600", "0,0", "go_back_balloon.click"))
			.append(createMotion(seconds, "go_back_balloon.click", "0,0", "0,1600", "balloon.click; home_button4.click"));
		
		// plane flies in
		var backwards_path = "M-656.909-256.47c36.195,1.235,72.232,7.033,106.987,17.214   c10.699,4.643,22.719,6.79,34.071,9.469c60.546,14.288,121.273,28.631,179.596,50.274c50.692,18.811,99.869,42.223,148.338,66.188   c22.234,10.993,37.739,19.632,56.234,30.993c17.731,10.892,14,8,53.356,32.203C-49.431-31.533-20.534-12.935,8.364,5.662   c1.063,3.958,2.881-0.784,6.168,1.665";
		var path = "M0,0c-28.897-18.597-57.795-37.194-86.692-55.792   c-39.356-24.203-35.625-21.31-53.356-32.203c-18.495-11.361-34-20-56.234-30.993c-48.469-23.965-97.646-47.377-148.338-66.188   c-58.323-21.643-119.05-35.985-179.596-50.274c-11.352-2.679-23.371-4.826-34.071-9.469   c-34.756-10.181-70.792-15.979-106.987-17.214";
		$(object.getElementById("plane"))
			.append(createSet("visibility", "visible", "balloon.click + " + (2*seconds) + "s; home_button4.click + " + (2*seconds) + "s", "go_back_balloon.click + " + seconds + "s", false))
			.append(createPath(2*seconds, path, "0", "balloon.click + " + (2*seconds) + "s; home_button4.click + " + (2*seconds) + "s", "go_back_balloon.click + " + seconds + "s"))
			.append(createPath(seconds, backwards_path, "0", "go_back_balloon.click", "balloon.click; home_button4.click"));
		$(object.getElementById("plane-shape"))
			.append(createTransform("rotate", 2*seconds, "balloon.click + " + (2*seconds) + "s; home_button4.click + " + (2*seconds) + "s", "0", "-10 0 0"))
			.append(createTransform("rotate", seconds, "go_back_balloon.click", "-10 0 0", "0"))
			.append(createMotion(2*seconds, "balloon.click + " + (2*seconds) + "s; home_button4.click + " + (2*seconds) + "s", "0,0", "0,300", "go_back_balloon.click"))
			.append(createMotion(2*seconds, "go_back_balloon.click", "0,300", "0,0", "balloon.click; home_button4.click"));


		// satellite moves in
		path = "M-470,200c120.588-78.699,299.084-164.038,438.495-200.086";
		backwards_path = "M6,0c-46.197,0.786-110.27,27.218-152.812,45.243   c-34.879,14.778-70.572,27.767-104.637,44.335C-314,120-398.536,167.22-458,220c-7.086,6.29-11.25,14.464-17.222,21.82";
		$(object.getElementById("satellite"))
			.append(createSet("visibility", "visible", "balloon.click + " + (2*seconds) + "s; home_button4.click + " + (2*seconds) + "s", "go_back_balloon.click + " + (seconds) + "s", false))
			.append(createPath(2*seconds, path, "0", "balloon.click + " + (2*seconds) + "s; home_button4.click + " + (2*seconds) + "s", "go_back_balloon.click + " + seconds + "s"))
			.append(createPath(seconds, backwards_path, "0", "go_back_balloon.click", "balloon.click; home_button4.click"));

		// lasers shoot up
		$(object.getElementById("lasers")).children().each(function() {$(this)
			.append(createSet("visibility", "visible", "balloon.click + " + (4*seconds) + "s; home_button4.click + " + (4*seconds) + "s", "go_back_balloon.click + " + (seconds/2.0) + "s", false))
			.append(createAnimate("stroke-dashoffset", seconds/2.0, "balloon.click + " + (4*seconds) + "s; home_button4.click + " + (4*seconds) + "s", "700", "0", "go_back_balloon.click", false))
			.append(createAnimate("stroke-dashoffset", seconds/2.0, "go_back_balloon.click", "0", "700", "balloon.click; home_button4.click", false));
		});

		// text boxes draw
		$(object.getElementById("monitoring-lines")).children().each(function() {
			$(this).append(createSet("visibility", "visible", "balloon.click + " + (2.5*seconds) + "s; home_button4.click + " + (2.5*seconds) + "s", "go_back_balloon.click + " + (seconds/2.0) + "s", false))
			.append(createAnimate("stroke-dashoffset", seconds, "balloon.click + " + (2.5*seconds) + "s; home_button4.click + " + (2.5*seconds) + "s", "300", "0", "go_back_balloon.click", false))
			.append(createAnimate("stroke-dashoffset", seconds/2.0, "go_back_balloon.click", "0", "300", "balloon.click; home_button4.click", false));
		});
		$(object.getElementById("monitoring-titles"))
			.append(createSet("visibility", "visible", "balloon.click + " + (2.5*seconds) + "s; home_button4.click + " + (2.5*seconds) + "s", "go_back_balloon.click + " + (seconds/2.0) + "s", false));
		// text box buttons draw
		$(object.getElementById("monitoring-buttons-open")).children().each(function() {
			var id = $(this).attr("id");
			var close_button = id + "close";
			$(this).append(createSet("visibility", "visible", "balloon.click + " + (3.5*seconds) + "s; home_button4.click + " + (3.5*seconds) + "s; " + close_button + ".click", "go_back_balloon.click; " + id + ".click", false));
			$(object.getElementById(close_button)).append(createSet("visibility", "visible", id + ".click", "go_back_balloon.click; " + close_button + ".click", false));
		});
		// text boxes & rects open up
		$(object.getElementById("monitoring-text-boxes")).children().each(function() {
			var open = $(this).attr("id") + "_open";
			var close = $(this).attr("id") + "_openclose";
			$(this).append(createSet("visibility", "visible", open + ".click", close + ".click + " + (seconds/2.0) + "s; go_back_balloon.click", false));
		});
		$(object.getElementById("clip-path1")).find("rect")
			.append(createAnimate("height", seconds/4.0, "monitoring1_open.click", "0", "129", "monitoring1_openclose.click; go_back_balloon.click", false))
			.append(createAnimate("height", seconds/4.0, "monitoring1_openclose.click", "129", "0", "monitoring1_open.click; go_back_balloon.click", false));
		$(object.getElementById("clip-path2")).find("rect")
			.append(createAnimate("height", seconds/4.0, "monitoring2_open.click", "0", "129", "monitoring2_openclose.click; go_back_balloon.click", false))
			.append(createAnimate("height", seconds/4.0, "monitoring2_openclose.click", "129", "0", "monitoring2_open.click; go_back_balloon.click", false));
		$(object.getElementById("clip-path3")).find("rect")
			.append(createAnimate("height", seconds/4.0, "monitoring3_open.click", "0", "206.426", "monitoring3_openclose.click; go_back_balloon.click", false))
			.append(createAnimate("height", seconds/4.0, "monitoring3_openclose.click", "206.426", "0", "monitoring3_open.click; go_back_balloon.click", false));
		$(object.getElementById("clip-path4")).find("rect")
			.append(createAnimate("height", seconds/4.0, "monitoring4_open.click", "0", "129", "monitoring4_openclose.click; go_back_balloon.click", false))
			.append(createAnimate("height", seconds/4.0, "monitoring4_openclose.click", "129", "0", "monitoring4_open.click; go_back_balloon.click", false));

	}

	function citiesClicked(object, buildings, seconds, trees, person, trees_hidden, smog, sand, button) {
		$([buildings, button]).click(function() {
			$([buildings, trees, trees_hidden]).attr("cursor", "auto").attr("pointer-events", "none");
			$(smog).fadeOut(seconds*1000);

			$(object.getElementById("molecules")).delay(2*seconds*1000).fadeIn(2*seconds*1000);
			$(object.getElementById("group1")).delay(2*seconds*1000).fadeIn(500);
			$(object.getElementById("go_back_cities")).delay(4*seconds*1000 + 1400).fadeIn(200);

			//$(object.getElementById("page1-ref2")).attr("visibility", "visible");
			//$(object.getElementById("page1-references")).attr("visibility", "hidden");
		});

		// expand-sun clicked
		$(object.getElementById("expand_sun")).click(function() {
			$(object.getElementById("green-molecules")).delay(3*seconds*1000).fadeIn(seconds*1000);
			$(object.getElementById("molecules")).delay(3*seconds*1000).fadeOut(seconds*1000);
			$(object.getElementById("molecules-lines")).delay(3*seconds*1000).fadeOut(seconds*1000);
		});
		// collapse-sun clicked
		$(object.getElementById("collapse_sun")).click(function() {
			$(object.getElementById("green-molecules")).delay(seconds*1000).fadeOut(0);
			$(object.getElementById("molecules")).fadeIn(seconds*1000);
			$(object.getElementById("molecules-lines")).fadeIn(seconds*1000);
		});

		// text moves in
		$(object.getElementById("sources-text")).append(createMotion(seconds, "buildings.click; sources_button.click", "-1600,0", "0,0", "go_back_cities.click + " + seconds + "s"))
			.append(createSet("visibility", "visible", "buildings.click; sources_button.click", "go_back_cities.click + " + (2*seconds) + "s", false))
			.append(createMotion(seconds, "go_back_cities.click + " + seconds + "s", "0,0", "-1600,0", "buildings.click; sources_button.click"));
		
		// scale city
		$([object.getElementById("cityscape"), trees_hidden, object.getElementById("mountains")])
			.append(createTransform("scale", seconds, "buildings.click; sources_button.click", "1", "1.23"))
			.append(createMotion(seconds, "buildings.click; sources_button.click", "0,0", "-50,-90", "go_back_cities.click + " + seconds + "s"))
			.append(createTransform("scale", seconds, "go_back_cities.click + " + seconds + "s", "1.23", "1"))
			.append(createMotion(seconds, "go_back_cities.click + " + seconds + "s", "-50,-90", "0,0", "buildings.click; sources_button.click"));

		// car moves in. also for LAND USE slide
		$(object.getElementById("car")).append(createSet("visibility", "visible", "buildings.click + " + (seconds) + "s; sources_button.click + " + seconds + "s; land_use_button.click + " + seconds + "s", "go_back_cities.click + " + (seconds) + "s; go_back_land_use.click + " + seconds + "s", false))
			.append(createMotion(seconds, "buildings.click + " + (seconds) + "s; sources_button.click + " + seconds + "s; land_use_button.click + " + seconds + "s", "800,0", "0,0", "go_back_cities.click; go_back_land_use.click"))
			.append(createMotion(seconds, "go_back_cities.click; go_back_land_use.click", "0,0", "800,0", "buildings.click; sources_button.click; land_use_button.click"));
	
		// lines draw
		$(object.getElementById("lines-for-sources")).children().each(function() {
			var stroke = $(this).attr("stroke-dashoffset") + "";
			$(this).append(createAnimate("stroke-dashoffset", 2*seconds, "buildings.click + " + (2*seconds) + "s; sources_button.click + " + (2*seconds) + "s", stroke, "0", "go_back_cities.click", false))
			.append(createAnimate("stroke-dashoffset", seconds/2.0, "go_back_cities.click", "0", stroke, "buildings.click; sources_button.click", false));
		});
		
		$([object.getElementById("circle1"), object.getElementById("circle2"), object.getElementById("circle3"), object.getElementById("circle4")])
			.append(createSet("visibility", "visible", "buildings.click + " + (4*seconds) + "s; sources_button.click + " + (4*seconds) + "s", "go_back_cities.click", false));
		
		// sun comes in
		$(object.getElementById("sunlight")).append(createSet("visibility", "visible", "buildings.click + " + (2*seconds + 1.4) + "s; sources_button.click + " + (2*seconds + 1.4) + "s", "go_back_cities.click + " + seconds + "s"))
			.append(createMotion(2*seconds, "buildings.click + " + (2*seconds) + "s; sources_button.click + " + (2*seconds) + "s", "500,0", "0,0", "go_back_cities.click"))
			.append(createMotion(seconds, "go_back_cities.click", "0,0", "500,0", "buildings.click; sources_button.click"));
	
		// button on sun
		$(object.getElementById("expand_sun")).append(createSet("visibility", "visible", "buildings.click + " + (4*seconds) + "s; sources_button.click + " + (4*seconds) + "s; collapse_sun.click + " + (1*seconds) +  "s", "go_back_cities.click; expand_sun.click"));
		$(object.getElementById("collapse_sun")).append(createSet("visibility", "visible", "expand_sun.click + " + (3.5*seconds) + "s", "go_back_cities.click; collapse_sun.click"));
	
		// white gradient draws when click sun
		$(object.getElementById("molecules-gradient")).append(createSet("visibility", "visible", "expand_sun.click", "collapse_sun.click + " + seconds + "s; go_back_cities.click + " + seconds + "s"));
		$(object.getElementById("gradient-clip")).find('rect').append(createAnimate("width", seconds, "expand_sun.click", "0", "1600", "collapse_sun.click; go_back_cities.click"))
			.append(createAnimate("width", seconds, "collapse_sun.click; go_back_cities.click", "1600", "0", "expand_sun.click; buildings.click; sources_button.click"));

		$(object.getElementById("gradient-clip2")).find('rect').append(createAnimate("width", seconds, "collapse_sun.click; go_back_cities.click", "1600", "0", "expand_sun.click"))
			.append(createSet("width", "1600", "expand_sun.click", "go_back_cities.click"));

		// disable go-back button during animation
		$(object.getElementById("go_back_cities")).append(createSet("pointer-events", "none", "expand_sun.click", "expand_sun.click + " + (3.5*seconds) + "s"));
		$(object.getElementById("go_back_cities")).append(createSet("cursor", "auto", "expand_sun.click", "expand_sun.click + " + (3.5*seconds) + "s"));
		$(object.getElementById("go_back_cities")).append(createSet("pointer-events", "none", "collapse_sun.click", "collapse_sun.click + " + (seconds) + "s"));
		$(object.getElementById("go_back_cities")).append(createSet("cursor", "auto", "collapse_sun.click", "collapse_sun.click + " + (seconds) + "s"));


		// hover over each source
		$([object.getElementById('plants_source_hover'),
			object.getElementById('forests_source_hover'),
			object.getElementById('motor_source_hover'),
			object.getElementById('cities_source_hover')]).hover(function() {
			var id = $(this).attr("id");
			$(object.getElementById(id + '_text')).attr("fill", "#d2df60");

			$(object.getElementById(id + '_chem')).find('circle').attr("fill", "#d2df60");

			$(object.getElementById(id + '_line')).attr("stroke", "#d2df60");
		}, function() {
			var id = $(this).attr("id");
			$(object.getElementById(id + '_text')).attr("fill", "#fff");
			$(object.getElementById(id + '_chem')).find('circle').attr("fill", "#328F8B");
			$(object.getElementById(id + '_line')).attr("stroke", "#fff");
		});

	}


	function personClicked(object, person, trees_hidden, balloon, beach, seconds,  button) {
		$([person, button]).click(function() {
			$(person).attr("cursor", "auto").attr("pointer-events", "none");
			$(trees_hidden).attr("cursor", "auto").attr("pointer-events", "none");
			$(object.getElementById("tree-ground")).hide();
			$(object.getElementById("go_back")).delay(3/2.0*seconds * 1000).fadeIn(200);
			//$(object.getElementById("page1-references")).attr("visibility", "hidden");
			//$(object.getElementById("health-references")).attr("visibility", "visible");
		});
		
		// hide elements of page1
		$(object.getElementById("first")).append(createMotion(seconds, "person.click; home_button2.click", "0,0", "2000,0", "go_back.click"))
			.append(createMotion(seconds, "go_back.click", "2000,0", "0,0", "person.click; home_button2.click"));
		// make trees bigger
		$(object.getElementsByClassName("trees-hide")).hide();
		// make beach and person bigger
		$(beach).append(createTransform("scale", seconds, "person.click; home_button2.click", "1", "1.25"))
			.append(createMotion(seconds, "person.click; home_button2.click", "0,0", "-410,-200", "go_back.click"))
			.append(createTransform("scale", seconds, "go_back.click", "1.25", "1"))
			.append(createMotion(seconds, "go_back.click", "-410,-200", "0,0", "person.click; home_button2.click"));

		$(object.getElementById("person-text")).append(createMotion(seconds, "person.click; home_button2.click", "-1600,0", "0,0", "go_back.click"))
			.append(createSet("visibility", "visible", "person.click; home_button2.click", "go_back.click + " + seconds + "s", false));
		$(object.getElementById("draw-respiratory-line")).append(createSet("visibility", "visible", "person.click + " + (seconds/2.0) + "s; home_button2.click + " + (seconds/2.0) + "s", "go_back.click", false));
		$(object.getElementById("draw-respiratory-line")).append(createAnimate("stroke-dashoffset", seconds/2.0, "person.click + " + (seconds) + "s; home_button2.click + " + (seconds) + "s", "440", "0", "go_back.click", false));
		$(object.getElementById("respiratory-dropdown")).append(createSet("visibility", "visible", "person.click + " + (3/2.0*seconds) + "s; home_button2.click + " + (3/2.0*seconds) + "s", "go_back.click", false));
		
		// to go back to homepage:
		$(object.getElementById("person-text")).append(createMotion(seconds, "go_back.click", "0,0", "-1600,0", "person.click; home_button2.click"));
		$(object.getElementById("draw-respiratory-line")).append(createAnimate("stroke-dashoffset", seconds, "go_back.click", "0", "440", "person.click; home_button2.click", false));
		
		$(object.getElementsByClassName("fade1")).each(function() {$(this).append(createSet("visibility", "visible", "person.click + " + seconds + "s; home_button2.click + " + seconds + "s", "go_back.click", false));});
		$(object.getElementById("health-line2")).append(createAnimate("stroke-dashoffset", seconds*3, "person.click + " + (seconds) + "s; home_button2.click + " + seconds + "s", "150", "0", "go_back.click", false));
		$(object.getElementById("health-line2")).append(createSet("visibility", "visible", "person.click + " + (seconds) + "s; home_button2.click + " + seconds + "s", "go_back.click", false));
		$(object.getElementById("health-line2")).append(createSet("stroke-dasharray", "0", "person.click + " + (seconds + 0.25) + "s; home_button2.click + " + (seconds + 0.25) + "s", "go_back.click", false));

		$(object.getElementById("forward")).append(createSet("visibility", "visible", "person.click + " + (seconds) + "s; home_button2.click + " + seconds + "s; respiratory2.click + " + (seconds) + "s; reverse_health.click + " + (seconds) + "s", "forward.click; go_back.click", false));
		
		initializeHealthLine(object, seconds, 0);
		hideHealth(object, seconds, 0);

		initializeRespiratory(object, seconds, 0);
	}

	function initializeRespiratory(object, seconds, sec) {
		// open respiratory effects
		$(object.getElementById("respiratory-hide")).append(createAnimate("height", 1, "respiratory2.click; respiratory2health.click", "495", "0", false));
		//$([object.getElementById("respiratory2"), object.getElementById("respiratory2health")]).click(function() {
		$(object.getElementById("respiratory2")).click(function() {	
			$(object.getElementById("respiratory2")).fadeOut(200);
			//$(object.getElementById("respiratory2-health")).fadeOut(200);
			$(object.getElementById("respiratory_close")).fadeIn(200);
			$(object.getElementById("respiratory-info")).show();

			// hide health impacts
			//$(object.getElementById("reverse_health")).click();
		});

		// close respiratory effects
		$([object.getElementById("respiratory_close"), object.getElementById("forward")]).click(function() {
			$(object.getElementById("respiratory2")).fadeIn(200);
			//$(object.getElementById("respiratory2-health")).fadeIn(200);
			$(object.getElementById("respiratory_close")).fadeOut(200);
			$(object.getElementById("respiratory-info")).fadeOut(200);
		});
	}

	function initializeHealthLine(object, seconds, sec) {
		$(object.getElementById("health-line")).append(createSet("visibility", "visible", "forward.click; respiratory_close.click", "respiratory2.click + " + seconds/2.0 + "s; reverse_health.click + " + seconds + "s; go_back.click", false));	//respiratory2.click
		$(object.getElementById("health-line")).append(createAnimate("stroke-dashoffset", seconds*2, "forward.click", "1000", "0", "respiratory2.click; reverse_health.click; go_back.click", false));
		$(object.getElementById("health-line")).append(createAnimate("stroke-dashoffset", seconds/2.0, "respiratory2.click; reverse_health.click; closeHealth.click; go_back.click", "0", "1000", "forward.click; respiratory_close.click", false));

		$(object.getElementById("go_back")).append(createSet("pointer-events", "none", "forward.click", "forward.click + " + (2*seconds) + "s", false))
			.append(createSet("cursor", "auto", "forward.click", "forward.click + " + (2*seconds) + "s", false));

		sec += seconds*2 / 5.0;
		$(object.getElementById("small-lines1")).append(createAnimate("stroke-dashoffset", seconds/2, "forward.click + " + sec + "s", "50", "0", "go_back.click", false)).append(createSet("visibility", "visible", "forward.click + " + (sec) + "s", "go_back.click", false));
		$(object.getElementsByClassName("fade2")).each(function() {$(this).append(createSet("visibility", "visible", "forward.click + " + (sec) + "s", "go_back.click", false));});
		
		sec += seconds*2 / 5.0;
		$(object.getElementById("small-lines2")).append(createAnimate("stroke-dashoffset", seconds/2, "forward.click + " + sec + "s", "50", "0", "go_back.click", false)).append(createSet("visibility", "visible", "forward.click + " + (sec) + "s", "go_back.click", false));
		$(object.getElementsByClassName("fade3")).each(function() {$(this).append(createSet("visibility", "visible", "forward.click + " + (sec) + "s", "go_back.click", false));});
		
		sec += seconds*2 / 5.0;
		$(object.getElementById("small-lines3")).append(createAnimate("stroke-dashoffset", seconds/2, "forward.click + " + sec + "s", "50", "0", "go_back.click", false)).append(createSet("visibility", "visible", "forward.click + " + (sec) + "s", "go_back.click", false));
		$(object.getElementsByClassName("fade4")).each(function() {$(this).append(createSet("visibility", "visible", "forward.click + " + (sec) + "s", "go_back.click", false));});
		
		sec += seconds*2 / 5.0;
		$(object.getElementById("small-lines4")).append(createAnimate("stroke-dashoffset", seconds/2, "forward.click + " + sec + "s", "50", "0", "go_back.click", false)).append(createSet("visibility", "visible", "forward.click + " + (sec) + "s", "go_back.click", false));
		$(object.getElementsByClassName("fade5")).each(function() {$(this).append(createSet("visibility", "visible", "forward.click + " + (sec) + "s", "go_back.click", false));});
		
		sec += seconds*2 / 5.0;
		$(object.getElementsByClassName("fade6")).each(function() {$(this).append(createSet("visibility", "visible", "forward.click + " + (sec) + "s", "go_back.click", false));});
	}

	function hideHealth(object, seconds, sec) {
		seconds /= 4;
		sec = 2*seconds * 0.9818;

		sec -= seconds*2 / 5.5;
		$(object.getElementById("small-lines1")).append(createAnimate("stroke-dashoffset", seconds/2, "respiratory2.click + " + (sec) + "s; reverse_health.click + " + (sec) + "s; closeHealth.click + " + (sec) + "s", "50", "0", "go_back.click", false)).append(createSet("visibility", "hidden", "respiratory2.click + " + (sec) + "s; reverse_health.click + " + (sec) + "s; closeHealth.click + " + (sec) + "s", "go_back.click", false));
		$(object.getElementsByClassName("fade2")).each(function() {$(this).append(createSet("visibility", "hidden", "respiratory2.click + " + (sec) + "s; reverse_health.click + " + (sec) + "s; closeHealth.click + " + (sec) + "s", "go_back.click"));});
		
		sec -= seconds*2 / 5.0;
		$(object.getElementById("small-lines2")).append(createAnimate("stroke-dashoffset", seconds/2, "respiratory2.click + " + (sec) + "s; reverse_health.click + " + (sec) + "s; closeHealth.click + " + (sec) + "s", "50", "0", "go_back.click", false)).append(createSet("visibility", "hidden", "respiratory2.click + " + (sec) + "s; reverse_health.click + " + (sec) + "s; closeHealth.click + " + (sec) + "s", "go_back.click", false));
		$(object.getElementsByClassName("fade3")).each(function() {$(this).append(createSet("visibility", "hidden", "respiratory2.click + " + (sec) + "s; reverse_health.click + " + (sec) + "s; closeHealth.click + " + (sec) + "s", "go_back.click"));});
		
		sec -= seconds*2 / 5.0;
		$(object.getElementById("small-lines3")).append(createAnimate("stroke-dashoffset", seconds/2, "respiratory2.click + " + (sec) + "s; reverse_health.click + " + (sec) + "s; closeHealth.click + " + (sec) + "s", "50", "0", "go_back.click", false)).append(createSet("visibility", "hidden", "respiratory2.click + " + (sec) + "s; reverse_health.click + " + (sec) + "s; closeHealth.click + " + (sec) + "s", "go_back.click", false));
		$(object.getElementsByClassName("fade4")).each(function() {$(this).append(createSet("visibility", "hidden", "respiratory2.click + " + (sec) + "s; reverse_health.click + " + (sec) + "s; closeHealth.click + " + (sec) + "s", "go_back.click"));});
		
		sec -= seconds*2 / 5.0;
		$(object.getElementById("small-lines4")).append(createAnimate("stroke-dashoffset", seconds/2, "respiratory2.click + " + (sec) + "s; reverse_health.click + " + (sec) + "s; closeHealth.click + " + (sec) + "s", "50", "0", "go_back.click", false)).append(createSet("visibility", "hidden", "respiratory2.click + " + (sec) + "s; reverse_health.click + " + (sec) + "s; closeHealth.click + " + (sec) + "s", "go_back.click", false));
		$(object.getElementsByClassName("fade5")).each(function() {$(this).append(createSet("visibility", "hidden", "respiratory2.click + " + (sec) + "s; reverse_health.click + " + (sec) + "s; closeHealth.click + " + (sec) + "s", "go_back.click"));});
		
		sec -= seconds*2 / 5.0;
		$(object.getElementsByClassName("fade6")).each(function() {$(this).append(createSet("visibility", "hidden", "respiratory2.click + " + (sec) + "s; reverse_health.click + " + (sec) + "s; closeHealth.click + " + (sec) + "s", "go_back.click", false));});
	}


	function createPath(seconds, path, rotate, begin, end) {
		var animation = document.createElementNS("http://www.w3.org/2000/svg","animateMotion");
		animation.setAttribute("dur", seconds + "s");
		animation.setAttribute("repeatCount", "1");
		animation.setAttribute("begin", begin);
		animation.setAttribute("path", path);
		animation.setAttribute("fill", "freeze");
		animation.setAttribute("end", end);
		animation.setAttribute("rotate", rotate);
		return animation;
	}

	function createMotion(seconds, begin, from, to, end, indefinite) {
		var animation = document.createElementNS("http://www.w3.org/2000/svg","animateMotion");
		animation.setAttribute("dur", seconds + "s");
		animation.setAttribute("repeatCount", "1");
		animation.setAttribute("begin", begin);
		animation.setAttribute("from", from);
		animation.setAttribute("to", to);
		animation.setAttribute("fill", "freeze");
		if (end != false)
			animation.setAttribute("end", end);
		if (indefinite != null && indefinite != false)
			animation.setAttribute("repeatCount", "indefinite");
		return animation;
	}
	function createTransform(type, seconds, begin, from, to) {
		var scale = document.createElementNS("http://www.w3.org/2000/svg","animateTransform");
		scale.setAttribute("attributeName", "transform");
		scale.setAttribute("attributeType", "XML");
		scale.setAttribute("type", type);
		scale.setAttribute("dur", seconds + "s");
		scale.setAttribute("repeatCount", "1");
		scale.setAttribute("begin", begin);
		scale.setAttribute("from", from);
		scale.setAttribute("to", to);
		scale.setAttribute("fill", "freeze");
		return scale;
	}
	function createSet(name, to, begin, end, id) {
		var set = document.createElementNS("http://www.w3.org/2000/svg","set");
		set.setAttribute("attributeName", name);
		set.setAttribute("attributeType", "XML");
		set.setAttribute("to", to);
		set.setAttribute("begin", begin);
		if (end != false)
			set.setAttribute("end", end);
		if (id != false)
			set.setAttribute("id", id);
		return set;
	}
	function createAnimate(name, seconds, begin, from, to, end, indefinite, id) {
		var animation = document.createElementNS("http://www.w3.org/2000/svg","animate");
		animation.setAttribute("dur", seconds + "s");
		animation.setAttribute("attributeName", name);
		animation.setAttribute("attributeType", "XML");
		animation.setAttribute("repeatCount", "1");
		animation.setAttribute("begin", begin);
		animation.setAttribute("from", from);
		animation.setAttribute("to", to);
		animation.setAttribute("fill", "freeze");
		if (end != false)
			animation.setAttribute("end", end);
		if (indefinite == true)
			animation.setAttribute("repeatCount", "indefinite");
		if (id != null && id != false)
			animation.setAttribute("id", id);
		return animation;
	}

</script>
</html>